# Интеграция foobar2000 с macOS
# Конфигурация для максимального использования возможностей macOS

[General macOS Integration]
# Создано: $(date '+%Y-%m-%d %H:%M:%S')
platform=macOS
version=2.1
integration_level=full

[File Associations]
# Автоматическая регистрация файловых ассоциаций
auto_register_filetypes=1
handle_audio_files=1

# Поддерживаемые форматы
formats_primary=flac,mp3,m4a,opus,wav,aiff
formats_secondary=ape,wv,ogg,mpc,tak
formats_exotic=dsf,dff,shn,tta

# Настройки ассоциаций
override_system_defaults=0
show_in_open_with=1
set_as_default=ask_user

# Контекстное меню Finder
[Finder Context Menu]
enabled=1
show_play_option=1
show_enqueue_option=1
show_convert_option=1
show_info_option=1

# Пункты меню
menu_play_text="Воспроизвести в foobar2000"
menu_enqueue_text="Добавить в очередь foobar2000"
menu_convert_text="Конвертировать аудио..."
menu_info_text="Информация об аудиофайле"

[Dock Integration]
# Интеграция с Dock macOS
show_in_dock=1
bounce_on_track_change=0
show_progress_in_dock=1
dock_menu_enabled=1

# Dock меню пункты
dock_menu_items=play_pause,previous,next,separator,show_window,preferences

# Индикатор прогресса в Dock
dock_progress_style=bar  # bar, pie, none
dock_progress_color=blue

[Menu Bar Integration]
# Опциональная интеграция с Menu Bar
show_menubar_item=0
menubar_icon_style=monochrome  # color, monochrome, text
compact_menu=1

# Menu Bar пункты
menubar_items=now_playing,separator,play_pause,previous,next,separator,volume,separator,quit

[Notifications]
# Использование Notification Center
use_notification_center=1
notify_on_track_change=1
notify_on_errors=1
notify_on_conversion_complete=1

# Настройки уведомлений
notification_style=banner  # banner, alert, none
show_album_art=1
notification_duration=3  # секунды
sound_on_notification=0

# Шаблон уведомления о смене трека
track_change_template="%artist% – %title%"
track_change_subtitle="%album%"

[AppleScript Support]
# Поддержка AppleScript для автоматизации
enable_applescript=1
accept_remote_commands=1
security_level=medium  # strict, medium, open

# Поддерживаемые AppleScript команды
supported_commands=play,pause,stop,next,previous,set_volume,get_status,get_current_track

# Пример AppleScript команд:
# tell application "foobar2000" to play
# tell application "foobar2000" to set volume to 50
# tell application "foobar2000" to get current track

[Spotlight Integration]
# Индексирование метаданных для Spotlight
enable_spotlight_metadata=1
export_playlist_metadata=1
update_spotlight_cache=1

# Метаданные для экспорта в Spotlight
spotlight_fields=title,artist,album,genre,year,duration,bitrate,format

# Обновление индекса
update_frequency=on_metadata_change  # on_metadata_change, daily, weekly, manual

[Media Keys Support]
# Обработка системных медиа-клавиш
handle_media_keys=1
exclusive_media_keys=0  # не блокировать другие плееры

# Поддерживаемые клавиши
support_play_pause=1
support_next_previous=1
support_volume=1
support_stop=0

# Поведение при неактивном окне
respond_when_inactive=1

[QuickLook Integration]
# Интеграция с QuickLook
enable_quicklook_plugin=1
show_metadata_in_quicklook=1
show_album_art_in_quicklook=1
show_waveform_in_quicklook=0  # требует дополнительной обработки

[Sharing and AirPlay]
# Интеграция с системами обмена macOS
enable_airplay_output=1
show_in_sharing_menu=1

# AirPlay настройки
airplay_quality=lossless  # lossless, high, standard
airplay_buffer_size=large

[System Audio Integration]
# Интеграция с системным аудио
respect_system_volume=1
show_in_sound_preferences=0
handle_audio_interruptions=1

# Поведение при переключении аудио устройств
auto_switch_device=ask  # auto, ask, never
remember_device_per_format=1

[File System Integration]
# Интеграция с файловой системой macOS
use_native_file_dialogs=1
respect_file_permissions=1
follow_symlinks=1
watch_library_changes=1

# Поддержка extended attributes
store_metadata_in_xattr=0  # experimental
preserve_resource_forks=1

[Security and Privacy]
# Настройки безопасности macOS
request_microphone_permission=0
request_camera_permission=0
respect_app_sandbox=1

# Доступ к папкам (для macOS Catalina+)
request_music_folder_access=1
request_documents_folder_access=0
request_downloads_folder_access=1

[Performance Optimization]
# Оптимизация производительности для macOS
use_grand_central_dispatch=1
background_processing=1
energy_efficiency_mode=auto  # auto, performance, efficiency

# Настройки для Apple Silicon
optimize_for_apple_silicon=auto  # auto, yes, no
use_neural_engine=0  # для обработки аудио (experimental)

[Appearance Integration]
# Интеграция с системным оформлением
follow_system_theme=1  # light, dark, auto
use_native_controls=1
respect_accessibility_settings=1

# Настройки для Dark Mode
dark_mode_behavior=follow_system  # follow_system, always_light, always_dark

[Automation and Scripts]
# Поддержка автоматизации
enable_folder_actions=1
support_automator_workflows=1
watch_hot_folders=1

# Hot folders для автоматической обработки
hot_folder_import="$HOME/Music/Import"
hot_folder_convert="$HOME/Music/Convert"

# Действия для hot folders
import_action=add_to_library
convert_action=ask_user

[Backup and Sync]
# Интеграция с системами резервного копирования
icloud_sync_settings=0  # синхронизация настроек через iCloud
time_machine_exclude_cache=1
exclude_from_spotlight=0

# Резервное копирование библиотеки
auto_backup_library=weekly  # daily, weekly, monthly, never
backup_location="$HOME/Music/foobar2000 Backups"

[Network Integration]
# Сетевые возможности
bonjour_discovery=1
share_library_bonjour=0
upnp_server=0

# Настройки безопасности сети
allow_remote_control=0
require_authentication=1

[Troubleshooting]
# Диагностические настройки
enable_debug_logging=0
log_applescript_commands=0
log_media_key_events=0

# Пути для логов
debug_log_path="$HOME/Library/Logs/foobar2000/debug.log"
crash_log_path="$HOME/Library/Logs/foobar2000/crashes/"

[Installation Paths]
# Пути установки и конфигурации
app_bundle="/Applications/foobar2000.app"
config_directory="$HOME/Library/foobar2000-v2"
cache_directory="$HOME/Library/Caches/org.foobar2000.mac"
logs_directory="$HOME/Library/Logs/foobar2000"

# Homebrew интеграция
homebrew_prefix_arm64="/opt/homebrew"
homebrew_prefix_intel="/usr/local"
detect_homebrew_arch=1

[Advanced Settings]
# Расширенные настройки интеграции
use_core_audio=1
use_avfoundation=1
metal_acceleration=auto  # для визуализаций

# Экспериментальные возможности
experimental_features=0
beta_integrations=0

# Совместимость с другими приложениями
integrate_with_music_app=0
integrate_with_itunes=0
respect_other_players=1